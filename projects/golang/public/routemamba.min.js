/**
 * MIT License
 * 
 * Copyright (c) 2022 Rezwan Ahmod Sami
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).routemamba={})}(this,(function(t){"use strict";var e,n,o,r,a;!function(t){t[t.HEADER=0]="HEADER",t[t.META=1]="META",t[t.BODY=2]="BODY",t[t.FOOTER=3]="FOOTER",t[t.TAB=4]="TAB"}(e||(e={})),function(t){t.Root="root",t.Header="header-root",t.Footer="footer-root",t.Body="body-root"}(n||(n={})),function(t){var e,n;t.RoutesPages=[],t.RoutesHeaders=[],t.RoutesFooters=[],t.server_host="",t.meta_content_url="",e=t.RouteContentsState||(t.RouteContentsState={}),(n=e.renderStatus||(e.renderStatus={})).header=!1,n.body=!1,n.footer=!1,e.ShouldHeaderload=!0,e.ShouldFooterload=!0,e.HeaderContent=null,e.FooterContent=null,e.BodyContent=null,e.MetaContent=null,e.HttpUrl=null}(o||(o={})),function(t){t.await_rendering=!0}(r||(r={})),function(t){t.NetworkConfig={localhost:"http://localhost",localIp:"http://127.0.0.1",localFilePath:"file://",tauriHost:"tauri://localhost",http_www:"http://www.",https_www:"https://www."},t.DomContent={ErrorHeadContent:'<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ERROR</title>',DefineMetaUrlError:"Define Meta Content Url",NavigateRoutePathUndefined:"Naviagte method called but route path not defined.",__404_urlErrorContent:'\n        <style>\n        body{\n            margin: 0;\n            padding: 0;\n            background-color: rgb(245, 245, 245);\n         }\n         .error_body{\n            width: 100% !important;\n            height: 100% !important;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            margin-top: 20px;\n         }\n         \n         .error_card{\n            display: block;\n            width: 400px;\n            background-color: rgb(255, 255, 255);\n            border-radius: 5px;\n            padding: 15px;\n            box-shadow: 1px 0px 12px rgb(177, 177, 177);\n         }\n         \n         .error_header{\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            border-bottom: 1px solid grey;\n         }\n         \n         h1{\n            color: rgb(248, 82, 82);\n         }\n         \n         p{\n            color: grey;\n         }\n         \n         .red-box{\n            background-color: rgba(255, 182, 182, 0.699);\n            color: rgb(255, 88, 88);\n            padding: 3px;\n            border-radius: 3px;\n            font-weight: 700;\n         }\n         \n         .red-box-l{\n            background-color: rgb(255, 174, 174);\n            color: rgb(247, 72, 72);\n            padding: 3px;\n            border-radius: 3px;\n            font-weight: 700;\n         }\n         \n         .r{\n            color: #65DBCA;\n         }\n         .p{\n            color: #C792EA\n         }\n         \n         .b{\n            color: #82AAE5\n         }\n         \n         .w{\n            color: #c9D1DF;\n         }\n         \n         .red{\n            color: red;\n         }\n         \n         .bg-code{\n            background-color: #011627;\n            color: rgb(1, 153, 22);\n            display: block;\n            padding: 5px;\n            border-radius: 5px;\n            font-weight: 700;\n            width: 100%;\n         }\n        </style>\n        <div class="error_body"><div class="error_card"><div class="error_header"><h1>404 HTTP URL</h1></div><div class="error_desc"><p><p class="red-box">Routemamba rendering error !!</p>Did you forget to declare <span class="red-box">http_url</span> on: </p><code class="bg-code"><span class="r">routemamba</span><span class="c">.</span><span class="b">route</span><span class="w">({</span><br><br>&nbsp&nbsp <span class="w">http_url:</span> <b class="red-box-l">undefined</b> &nbsp <b class="red"><<-- error !(undefined)</b><br><br><span class="w">});</span></code><p>Set <span class="red-box">http_url</span> to solve this problem</p><hr><p>Developed by: Rezwan Ahmod Sami</p></div></div></div>',__404_ServerHostErrorContent:'<style>\n         body{\n             margin: 0;\n             padding: 0;\n             background-color: rgb(245, 245, 245);\n          }\n          .error_body{\n             width: 100% !important;\n             height: 100% !important;\n             display: flex;\n             justify-content: center;\n             align-items: center;\n             margin-top: 20px;\n          }\n          \n          .error_card{\n             display: block;\n             width: 400px;\n             background-color: rgb(255, 255, 255);\n             border-radius: 5px;\n             padding: 15px;\n             box-shadow: 1px 0px 12px rgb(177, 177, 177);\n          }\n          \n          .error_header{\n             display: flex;\n             justify-content: center;\n             align-items: center;\n             border-bottom: 1px solid grey;\n          }\n          \n          h1{\n             color: rgb(248, 82, 82);\n          }\n          \n          p{\n             color: grey;\n          }\n          \n          .red-box{\n             background-color: rgba(255, 182, 182, 0.699);\n             color: rgb(255, 88, 88);\n             padding: 3px;\n             border-radius: 3px;\n             font-weight: 700;\n          }\n          \n          .red-box-l{\n             background-color: rgb(255, 174, 174);\n             color: rgb(247, 72, 72);\n             padding: 3px;\n             border-radius: 3px;\n             font-weight: 700;\n          }\n          \n          .r{\n             color: #65DBCA;\n          }\n          .p{\n             color: #C792EA\n          }\n          \n          .b{\n             color: #82AAE5\n          }\n          \n          .w{\n             color: #c9D1DF;\n          }\n          \n          .red{\n             color: red;\n          }\n          \n          .bg-code{\n             background-color: #011627;\n             color: rgb(1, 153, 22);\n             display: block;\n             padding: 5px;\n             border-radius: 5px;\n             font-weight: 700;\n             width: 100%;\n          }\n         </style><div class="error_body"><div class="error_card"><div class="error_header"><h1>404 SERVER HOST</h1></div><div class="error_desc"><p><p class="red-box">Routemamba rendering error !!</p>Did you forget to declare <span class="red-box">server_host</span> on: </p><code class="bg-code"><span class="r">routemamba</span><span class="c">.</span><span class="b">registerServerHost</span><span class="w">(</span>&nbsp<b class="red-box-l">undefined</b> ); <b class="red"><<-- error!!!</b><br><br></span></code><p>Set <span class="red-box">registerServerHost()</span> to solve this problem</p><hr><p>Developed by: Rezwan Ahmod Sami</p></div></div></div>'}}(a||(a={}));var l=function(t){var e;if(function(t){return"SCRIPT"==t.tagName}(t))null===(e=t.parentNode)||void 0===e||e.replaceChild(function(t){var e=document.createElement("script");e.text=t.innerHTML;for(var n,o=-1,r=t.attributes;++o<r.length;)e.setAttribute((n=r[o]).name,n.value);return e}(t),t);else for(var n=-1,o=t.childNodes;++n<o.length;)l(o[n]);return t},u=function(t){var e=document.querySelectorAll(t);null!=e&&null!=e&&e.forEach((function(t){l(t)}))},s=function(t){var e=document.querySelector("body");if(null==e)throw new Error("Can't render DOM Root!!. DOM Root body tag not found.");if(null==e)throw new Error("Can't render DOM Root!!. DOM Root body tag not found.");return e.innerHTML=t,u("body"),!0},d=function(t,e){var n=document.querySelector(t);if(null==n)throw new Error("Can't render DOM!!. ".concat(t," Element not found."));if(null==n)throw new Error("Can't render DOM!!. ".concat(t," Element not found."));return n.innerHTML=e,u(t),!0},c=function(t,e){return document.querySelectorAll(t).forEach((function(n){if(null==n)throw new Error("Can't render state value!!. ".concat(t," Element not found."));if(null==n)throw new Error("Can't render state value!!. ".concat(t," Element not found."));n.innerHTML=e})),u(t),!0},i=function(t){var e=document.querySelector("head");if(null==e)throw new Error("Can't render DOM Root!!. DOM Root Head tag not found.");if(null==e)throw new Error("Can't render DOM Root!!. DOM Root Head tag not found.");return e.innerHTML=t,!0},h=function(){!function(){var t=document.querySelector("".concat(n.Root));if(null==t||null==t)throw new Error("Can't render DOM Root!!. DOM Root ".concat(n.Root," tag not found."));var e=document.querySelector("".concat(n.Root," ").concat(n.Header));if(null==e||null==e){var o=document.createElement("".concat(n.Header));t.appendChild(o)}}(),function(){var t=document.querySelector("".concat(n.Root));if(null==t||null==t)throw new Error("Can't render DOM Root!!. DOM Root ".concat(n.Root," tag not found."));var e=document.querySelector("".concat(n.Root," ").concat(n.Body));if(null==e||null==e){var o=document.createElement("".concat(n.Body));t.appendChild(o)}}(),function(){var t=document.querySelector("".concat(n.Root));if(null==t||null==t)throw new Error("Can't render DOM Root!!. DOM Root ".concat(n.Root," tag not found."));var e=document.querySelector("".concat(n.Root," ").concat(n.Footer));if(null==e||null==e){var o=document.createElement("".concat(n.Footer));t.appendChild(o)}}()},p=function(t){return!!new RegExp("^(https?://)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(?:/[a-z\\d%_.~+]*)*(?:\\?[;&a-z\\d%_.~+=-]*)?(?:\\#[-a-z\\d_]*)?$","i").test(t)};var f,_,g={isValidUrl:p,isEmptyObject:function(t){return 0==Object.keys(t).length},parseQueryString:function(t){for(var e=t.split("&"),n={},o=0;o<e.length;o++){var r=e[o].split("="),a=decodeURIComponent(r[0]),l=decodeURIComponent(r[1]);if(void 0===n[a])n[a]=decodeURIComponent(l);else if("string"==typeof n[a]){var u=[n[a],decodeURIComponent(l)];n[a]=u}else n[a].push(decodeURIComponent(l))}return n},parseObjectToQueryString:function(t){var e="";if(null!=t)for(var n=Object.keys(t),o=Object.values(t),r=0;r<n.length;r++)e+=n[r]+"="+o[r],n.length-1!=r&&(e+="&");return e},isValidServerHost:function(t){return t.includes(a.NetworkConfig.localIp)||t.includes(a.NetworkConfig.localhost)||t.includes(a.NetworkConfig.localFilePath)||t.includes(a.NetworkConfig.tauriHost)||p(t)},checkPathParam:function(t,e){var n=t.split("/"),o=e.split("/");if(n.length!==o.length)return null;for(var r={},a=0;a<n.length;a++){if(o[a].startsWith(":"))r[o[a].slice(1)]=n[a];else if(n[a]!==o[a])return null}return r},isPathParamPattern:function(t){if(t.startsWith("/")&&t.includes(":")){for(var e=0,n=t.match(/[^/]+/g);e<n.length;e++){if(n[e].split(":").length>2)return!1}return!0}return!1}},b=function(t,r){switch(t){case e.HEADER:o.RouteContentsState.HeaderContent=r;break;case e.BODY:o.RouteContentsState.BodyContent=r;break;case e.FOOTER:o.RouteContentsState.FooterContent=r}!function(){var t=o.RouteContentsState.HeaderContent,e=o.RouteContentsState.FooterContent,r=o.RouteContentsState.BodyContent;o.RouteContentsState.ShouldHeaderload&&o.RouteContentsState.ShouldFooterload&&null!=t&&null!=e&&null!=r?(o.RouteContentsState.ShouldHeaderload&&!o.RouteContentsState.renderStatus.header&&(d(n.Header,t),o.RouteContentsState.renderStatus.header=!0),o.RouteContentsState.renderStatus.body||(d(n.Body,r),o.RouteContentsState.renderStatus.body=!0),o.RouteContentsState.ShouldFooterload&&!o.RouteContentsState.renderStatus.footer&&(d(n.Footer,e),o.RouteContentsState.renderStatus.footer=!0),null!=o.RouteContentsState.HeaderContent&&null!=o.RouteContentsState.BodyContent&&null!=o.RouteContentsState.FooterContent&&(o.RouteContentsState.HeaderContent=null,o.RouteContentsState.BodyContent=null,o.RouteContentsState.FooterContent=null),null!=o.RouteContentsState.navigationCallback&&null!=o.RouteContentsState.navigationCallback&&o.RouteContentsState.navigationCallback()):!o.RouteContentsState.ShouldHeaderload&&o.RouteContentsState.ShouldFooterload&&null==t&&null!=e&&null!=r?(o.RouteContentsState.renderStatus.body||(d(n.Body,r),o.RouteContentsState.renderStatus.body=!0),o.RouteContentsState.renderStatus.footer||(d(n.Footer,e),o.RouteContentsState.renderStatus.footer=!0),null!=o.RouteContentsState.navigationCallback&&null!=o.RouteContentsState.navigationCallback&&o.RouteContentsState.navigationCallback(),null!=o.RouteContentsState.FooterContent&&null!=o.RouteContentsState.BodyContent&&(o.RouteContentsState.FooterContent=null,o.RouteContentsState.BodyContent=null)):o.RouteContentsState.ShouldHeaderload&&!o.RouteContentsState.ShouldFooterload&&null!=t&&null==e&&null!=r?(o.RouteContentsState.renderStatus.header||(d(n.Header,t),o.RouteContentsState.renderStatus.header=!0),o.RouteContentsState.renderStatus.body||(d(n.Body,r),o.RouteContentsState.renderStatus.body=!0),null!=o.RouteContentsState.navigationCallback&&null!=o.RouteContentsState.navigationCallback&&o.RouteContentsState.navigationCallback(),null!=o.RouteContentsState.HeaderContent&&null!=o.RouteContentsState.BodyContent&&(o.RouteContentsState.HeaderContent=null,o.RouteContentsState.BodyContent=null)):o.RouteContentsState.ShouldHeaderload||o.RouteContentsState.ShouldFooterload||null!=t||null!=e||null==r||(o.RouteContentsState.renderStatus.body||(d(n.Body,r),o.RouteContentsState.renderStatus.body=!0),null!=o.RouteContentsState.navigationCallback&&null!=o.RouteContentsState.navigationCallback&&o.RouteContentsState.navigationCallback(),null!=o.RouteContentsState.BodyContent&&(o.RouteContentsState.BodyContent=null));var a=o.RouteContentsState.ShouldHeaderload&&o.RouteContentsState.renderStatus.header&&o.RouteContentsState.renderStatus.body&&o.RouteContentsState.ShouldFooterload&&o.RouteContentsState.renderStatus.footer,l=!o.RouteContentsState.ShouldHeaderload&&!o.RouteContentsState.renderStatus.header&&!o.RouteContentsState.ShouldFooterload&&!o.RouteContentsState.renderStatus.footer&&o.RouteContentsState.renderStatus.body,u=o.RouteContentsState.ShouldHeaderload&&o.RouteContentsState.renderStatus.header&&!o.RouteContentsState.ShouldFooterload&&!o.RouteContentsState.renderStatus.footer&&o.RouteContentsState.renderStatus.body,s=!o.RouteContentsState.ShouldHeaderload&&!o.RouteContentsState.renderStatus.header&&o.RouteContentsState.ShouldFooterload&&o.RouteContentsState.renderStatus.footer&&o.RouteContentsState.renderStatus.body;(a||l||u||s)&&(o.RouteContentsState.renderStatus.header=!1,o.RouteContentsState.renderStatus.body=!1,o.RouteContentsState.renderStatus.footer=!1)}()},S=function(t){var l=window.location.href;switch(t.component_type){case e.HEADER:t.container=n.Header;break;case e.BODY:t.container=n.Body;break;case e.FOOTER:t.container=n.Footer}if(""!=t.server_host)if(g.isValidServerHost(t.server_host))if(t.server_host.includes(a.NetworkConfig.https_www)||t.server_host.includes(a.NetworkConfig.http_www)){for(var u=l.split("/"),s="",c=0;c<3;c++)s+=1==c?"//":u[c];s+="/",t.http_url==t.server_host&&(t.http_url=s),t.server_host=s}else if(t.server_host.includes(a.NetworkConfig.localIp)||t.server_host.includes(a.NetworkConfig.localhost))l.includes(a.NetworkConfig.localIp)?t.server_host.includes(a.NetworkConfig.localhost)&&(t.server_host=t.server_host.replace(a.NetworkConfig.localhost,a.NetworkConfig.localIp)):l.includes(a.NetworkConfig.localhost)&&t.server_host.includes(a.NetworkConfig.localIp)&&(t.server_host=t.server_host.replace(a.NetworkConfig.localIp,a.NetworkConfig.localhost));else{for(var i=t.server_host.split("/"),h="",p=0;p<i.length;p++)0==p&&"https:"==i[p]||"http:"==i[p]?h=i[p]+"/":(1==p&&(l.includes(a.NetworkConfig.http_www)||t.server_host.includes(a.NetworkConfig.http_www))&&(h+="www."),""!=i[p]?h+=i[p]:h+="/");t.http_url==t.server_host&&(t.http_url=h),t.server_host=h}else alert("The server host is invalid");if(t.http_url_change&&null!=t.http_url&&(""==t.http_url&&(t.http_url=t.server_host),window.history.pushState(t.server_host,"",t.http_url)),""!=t.container&&null!=t.container&&""!=t.content_url){var f=new XMLHttpRequest;f.onprogress=function(){null!=t.preloader&&""!=t.preloader&&null!=t.container&&d(t.container,t.preloader)},f.onload=function(n){r.await_rendering&&t.component_type!=e.TAB&&t.component_type!=e.META?b(t.component_type,this.response):null!=t.container&&d(t.container,this.response)},f.onerror=function(e){throw null!=t.container&&d(t.container,t.error_content),new Error(this.response)};var _="";if("POST"==t.method)_=g.parseObjectToQueryString(t.data);else if("GET"==t.method&&o.meta_content_url==t.content_url){if(!g.isEmptyObject(t.data))if(t.content_url.includes("?")){var S=t.content_url.split("?");""!=S[S.length-1]&&null!=S[S.length-1]&&(t.content_url+="&")}else t.content_url+="?";t.content_url+=g.parseObjectToQueryString(t.data)}f.open(t.method,t.content_url),"POST"==t.method&&f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(_)}},C=function(t){var e=[],n=t.http_url,r=t.content_url,l={};if((null!=t.PathParamData||null==t.PathParamData&&"object"==typeof t.PathParamData)&&Object.assign(l,t.PathParamData),null!=t.http_url?e=t.http_url.split("?"):(i(a.DomContent.ErrorHeadContent),s(a.DomContent.__404_urlErrorContent)),null!=e[1]){var u=g.parseQueryString(e[1]);if(!g.isEmptyObject(u))for(var d in u)l.hasOwnProperty(d)||(l[d]=u[d]);var c=g.parseObjectToQueryString(l);r=r.includes("?")?r+"&"+c:r+"?"+c}else if(null==t.data||null==t.data||g.isEmptyObject(t.data)){if(null==e[1]&&(null==t.data&&null==t.data||g.isEmptyObject(t.data))&&!g.isEmptyObject(l)){c=g.parseObjectToQueryString(l);r=r.includes("?")?r+"&"+c:r+"?"+c}}else{Object.assign(l,t.data);var h=g.parseObjectToQueryString(t.data),p=g.parseObjectToQueryString(l);r=r.includes("?")?r+"&"+p:r+"?"+p,n.includes("?")?r=n+"&"+h:n=n+"?"+h}t.meta_loader&&y(n,t.registered_url_pattern);var f={method:t.method,content_url:r,component_type:t.component_type,container:t.container,preloader:t.preloader,error_content:t.error_content,data:l,http_url_change:t.http_url_change,server_host:o.server_host,http_url:n};null==t.http_url_change||t.http_url_change?t.http_url_change&&(null!=o.server_host&&""!=o.server_host?S(f):(i(a.DomContent.ErrorHeadContent),s(a.DomContent.__404_ServerHostErrorContent))):S(f)},v=function(){var t=window.location.href,n=new URL(t),r=n.pathname+n.search,a=r.split("?");a[0].length>1&&"/"==a[0][a[0].length-1]&&(a[0]=a[0].slice(0,-1));var l={};null!=a[1]&&(l=g.parseQueryString(a[1]));for(var u=!1,s=0;s<o.RoutesHeaders.length;s++){for(var d=o.RoutesHeaders[s],c=0;c<d.http_url.length;c++){var i=d.http_url[c];if(i==a[0]||null!=g.checkPathParam(a[0],i)){var h=i,p=g.checkPathParam(a[0],i),f={method:"GET",meta_loader:!1,content_url:d.content_url.split("?")[0],component_type:e.HEADER,preloader:d.preloader,data:l,PathParamData:p,error_content:d.error_content,http_url_change:!1,http_url:r,registered_url_pattern:h};C(f),u=!0;break}i!=a[0]&&c==d.http_url.length-1&&s==o.RoutesHeaders.length-1&&(o.RouteContentsState.ShouldHeaderload=!1,o.RouteContentsState.HeaderContent=null)}if(u)break}},R=function(){var t=window.location.href,n=new URL(t),r=n.pathname+n.search,a=r.split("?");a[0].length>1&&"/"==a[0][a[0].length-1]&&(a[0]=a[0].slice(0,-1));var l={};null!=a[1]&&(l=g.parseQueryString(a[1]));for(var u=0;u<o.RoutesPages.length;u++){var d=o.RoutesPages[u],c=d.http_url;if(c==a[0]||null!=g.checkPathParam(a[0],c)){var i=c,h=g.checkPathParam(a[0],c),p="";if("GET"==d.method){var f=d.content_url.split("?");p="".concat(f[0])}var _={method:d.method,meta_loader:!0,content_url:p,component_type:e.BODY,container:d.container,preloader:d.preloader,data:l,PathParamData:h,error_content:d.error_content,http_url_change:d.http_url_change,http_url:r,registered_url_pattern:i};C(_);break}if(c!=a[0]&&u===o.RoutesPages.length-1)throw s("No any Register route found: ".concat(a[0])),new Error("No any Register route found: ".concat(a[0]))}},m=function(){var t=window.location.href,n=new URL(t),r=n.pathname+n.search,a=r.split("?");a[0].length>1&&"/"==a[0][a[0].length-1]&&(a[0]=a[0].slice(0,-1));var l={};null!=a[1]&&(l=g.parseQueryString(a[1]));for(var u=!1,s=0;s<o.RoutesFooters.length;s++){for(var d=o.RoutesFooters[s],c=0;c<d.http_url.length;c++){var i=d.http_url[c];if(i==a[0]||null!=g.checkPathParam(a[0],i)){var h=i,p=g.checkPathParam(a[0],i),f={method:"GET",meta_loader:!1,content_url:d.content_url.split("?")[0],component_type:e.FOOTER,preloader:d.preloader,data:l,PathParamData:p,error_content:d.error_content,http_url_change:!1,http_url:r,registered_url_pattern:h};C(f),u=!0;break}i!=a[0]&&c==d.http_url.length-1&&s==o.RoutesFooters.length-1&&(o.RouteContentsState.ShouldFooterload=!1,o.RouteContentsState.FooterContent=null)}if(u)break}},y=function(t,n){if(null==o.meta_content_url||""==o.meta_content_url)throw s(a.DomContent.DefineMetaUrlError),new Error(a.DomContent.DefineMetaUrlError);var r=t.split("?");"/"==r[0][r[0].length-1]&&(r[0]=r[0].slice(0,-1));var l={};if(null!=n&&null!=g.checkPathParam(r[0],n)){var u=g.checkPathParam(r[0],n);null==u||g.isEmptyObject(u)||Object.assign(l,u)}if(null==t||""==t){if(r.length>1){var d=g.parseQueryString(r[1]);g.isEmptyObject(d)||Object.assign(l,d)}l.route="/"}else{if(r.length>1){d=g.parseQueryString(r[1]);g.isEmptyObject(d)||Object.assign(l,d)}l.route=null!=n?n:r[0]}var c={method:"GET",content_url:o.meta_content_url,component_type:e.META,container:"head meta",preloader:"",error_content:"",data:l,http_url_change:!1,server_host:o.server_host,http_url:""};S(c)};t.localState=void 0,f=t.localState||(t.localState={}),_=function(t,e){void 0===t&&(t=null),void 0===e&&(e=void 0),null!=t&&(Array.isArray(t)?t.forEach((function(t){c(t,e)})):c(t,e))},f.useState=function(t,e){void 0===t&&(t=void 0),void 0===e&&(e=null);var n=t;return _(e,n),[function(){return n},function(t){_(e,n=t)}]},t.await_rendering=function(t){r.await_rendering=t},t.initTabs=function(t){t.forEach((function(t){if(null==t.tabSwitcher||""==t.tabSwitcher)throw new Error("`tabSwitcher` field can't be undefined or empty in Tabs register.");if(null==t.initialTab||""==t.initialTab)throw new Error("`initialTab` field can't be undefined or empty in Tabs register.");if(null==t.tabs)throw new Error("`tabs` field can't be undefined in Tabs register.");document.querySelectorAll(t.tabSwitcher).forEach((function(e){var n;e.getAttribute("tabRoute")==t.initialTab&&(null!=document.querySelector(".".concat(t.activeSwitcherClass))&&null!=document.querySelector(".".concat(t.activeSwitcherClass))&&(null===(n=document.querySelector(".".concat(t.activeSwitcherClass)))||void 0===n||n.classList.remove(t.activeSwitcherClass)),e.classList.add(t.activeSwitcherClass)),e.addEventListener("click",(function(){var n,o,r,a,l=e.getAttribute("tabRoute");if(null==l)throw new Error("`tabRoute` Attribute can't be undefined in tab switcher.");null!=document.querySelector(".".concat(t.activeSwitcherClass))&&null!=document.querySelector(".".concat(t.activeSwitcherClass))&&(null===(n=document.querySelector(".".concat(t.activeSwitcherClass)))||void 0===n||n.classList.remove(t.activeSwitcherClass)),e.classList.add(t.activeSwitcherClass);var u=document.getElementById(l);if(null==u||null==u)throw new Error("`"+l+"` tabRoute container can't be undefined.");null!=t.activeTabClass&&null!=t.activeTabClass&&""!=t.activeTabClass?(null===(o=document.querySelector(".".concat(t.activeTabClass)))||void 0===o||o.classList.remove(t.activeTabClass),u.classList.add(t.activeTabClass)):(null===(r=document.querySelector(".rm-tab-active"))||void 0===r||r.style.setProperty("display","",""),null===(a=document.querySelector(".rm-tab-active"))||void 0===a||a.classList.remove("rm-tab-active"),u.style.setProperty("display","block","important"),u.classList.add("rm-tab-active"))}))})),t.tabs.forEach((function(n){if(n.tabRoute==t.initialTab){var o=document.getElementById(n.tabRoute);if(null==o||null==o)throw new Error("`"+n.tabRoute+"` tabRoute container can't be undefined.");null!=t.activeTabClass&&null!=t.activeTabClass&&""!=t.activeTabClass?o.classList.add(t.activeTabClass):(o.style.setProperty("display","block","important"),o.classList.add("rm-tab-active"))}var r={method:"GET",meta_loader:!1,content_url:n.content_url,component_type:e.TAB,container:"#".concat(n.tabRoute),preloader:n.preloader,error_content:n.error_content,data:{},http_url_change:!1,http_url:""};null==n.data&&null==n.data||(r.data=n.data),C(r)}))}))},t.navigate=function(t,n,r,l){if(void 0===n&&(n=null),void 0===r&&(r={}),void 0===l&&(l=null),o.RouteContentsState.navigationCallback=l,o.RouteContentsState.ShouldHeaderload=!1,o.RouteContentsState.ShouldFooterload=!1,null==t&&null==t)throw Error(a.DomContent.NavigateRoutePathUndefined);for(var u=o.RoutesPages,s=0;s<u.length;s++){var d=t,c=t.split("?")[0];if(c.length>1&&"/"==c[c.length-1]&&(c=c.slice(0,-1)),null!=c&&(c==u[s].http_url||null!=g.checkPathParam(c,u[s].http_url))){var i=u[s].http_url,h=i,p=!0,f=u[s].method,_=u[s].meta_loader,b=g.checkPathParam(c,u[s].http_url);if(null==n&&(n={}),"/"==t&&(d=""),null!=r.meta_loader&&"boolean"==typeof r.meta_loader&&(_=r.meta_loader),null!=r.http_url_change&&"boolean"==typeof r.http_url_change&&(p=r.http_url_change),null!=r.method&&""!=r.method&&(f=r.method),null!=r.header_load&&"boolean"==typeof r.header_load&&(o.RouteContentsState.ShouldHeaderload=r.header_load,r.header_load))for(var S=0;S<o.RoutesHeaders.length;S++){for(var v=o.RoutesHeaders[S],R=!1,m=0;m<v.http_url.length;m++){if(v.http_url[m]==i){var y={method:"GET",meta_loader:!1,content_url:v.content_url,component_type:e.HEADER,preloader:v.preloader,data:n,PathParamData:b,error_content:v.error_content,http_url_change:!1,http_url:d,registered_url_pattern:h};C(y),R=!0;break}v.http_url[m]!=i&&m==v.http_url.length-1&&S==o.RoutesHeaders.length-1&&(o.RouteContentsState.ShouldHeaderload=!1,o.RouteContentsState.HeaderContent=null)}if(R)break}if(null!=r.footer_load&&"boolean"==typeof r.footer_load&&(o.RouteContentsState.ShouldFooterload=r.footer_load,r.footer_load))for(var w=0;w<o.RoutesFooters.length;w++){for(var E=o.RoutesFooters[w],k=(R=!1,0);k<E.http_url.length;k++){if(E.http_url[k]==i){var P={method:"GET",meta_loader:!1,content_url:E.content_url,component_type:e.FOOTER,preloader:E.preloader,data:n,PathParamData:b,error_content:E.error_content,http_url_change:!1,http_url:d,registered_url_pattern:h};C(P),R=!0;break}E.http_url[k]!=i&&k==E.http_url.length-1&&w==o.RoutesFooters.length-1&&(o.RouteContentsState.ShouldFooterload=!1,o.RouteContentsState.FooterContent=null)}if(R)break}var H={method:f,meta_loader:_,content_url:u[s].content_url,component_type:e.BODY,preloader:u[s].preloader,data:n,PathParamData:b,error_content:u[s].error_content,http_url_change:p,http_url:d,registered_url_pattern:h};C(H);break}if(!t.includes(u[s].http_url)&&s==o.RoutesPages.length-1)throw new Error("".concat(t," is not a registered routes."))}},t.pop_route=function(){history.back()},t.push_route=function(){history.go(1)},t.registerMetaUrl=function(t){o.meta_content_url=t},t.registerServerHost=function(t){o.server_host=t},t.register_http_routes=function(t){o.RoutesPages=t,"undefined"!=typeof window&&window.addEventListener("popstate",(function(){!function(t){if(t)for(var e=window.location.href,n=new URL(e),r=(n.pathname+n.search).split("?"),a=o.RoutesPages,l=0;l<a.length;l++){var u=a[l].http_url;if(u==r[0]||g.isPathParamPattern(u)){o.RouteContentsState.ShouldHeaderload&&v(),R(),o.RouteContentsState.ShouldFooterload&&m();break}}}(!0)}))},t.register_routes_footers=function(t){o.RoutesFooters=t},t.register_routes_headers=function(t){o.RoutesHeaders=t},t.render=function(){h(),v(),m(),R()},Object.defineProperty(t,"__esModule",{value:!0})}));